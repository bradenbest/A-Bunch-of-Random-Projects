#include<stdio.h>
#include<string.h>
#include<stdlib.h>

typedef class Month{
  public:
    char name[10];
    int contents[42];
    void init(char *n, int *c){
      int i;
      for(i = 0; i < 10; i++){
        name[i] = n[i];
      }
      for(i = 0; i < 42; i++){
        contents[i] = c[i];
      }
    }
} month_t;

month_t Months[12];

void init(){
  int i;
  int con[12][42] = {
    {0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,0 ,0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,0 ,0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,0 ,0 ,0 ,0 ,0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,0 ,0 ,0 ,0 ,0 ,0},
    {0 ,1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0}
  };
  char nam[12][10] = {
    {'J','a','n','u','a','r','y', 0 , 0 , 0 },
    {'F','e','b','r','u','a','r','y', 0 , 0 },
    {'M','a','r','c','h', 0 , 0 , 0 , 0 , 0 },
    {'A','p','r','i','l', 0 , 0 , 0 , 0 , 0 },
    {'M','a','y', 0 , 0 , 0 , 0 , 0 , 0 , 0 },
    {'J','u','n','e', 0 , 0 , 0 , 0 , 0 , 0 },
    {'J','u','l','y', 0 , 0 , 0 , 0 , 0 , 0 },
    {'A','u','g','u','s','t', 0 , 0 , 0 , 0 },
    {'S','e','p','t','e','m','b','e','r', 0 },
    {'O','c','t','o','b','e','r', 0 , 0 , 0 },
    {'N','o','v','e','m','b','e','r', 0 , 0 },
    {'D','e','c','e','m','b','e','r', 0 , 0 }
  };
  for(i = 0; i < 12; i++) Months[i].init(nam[i],con[i]);
}
int get(int *Mo, int x, int y){
  return *(Mo + x + y * 7);
}
void month(month_t Mon){
  int *Mo = Mon.contents;
  int day,i,j;
  int mlen = strlen(Mon.name);
  for(i = 0; i < ((7*3) - mlen) / 2; i++)putchar(32);
  printf("%s",Mon.name);
  for(i = 0; i < ((7*3) - mlen) / 2; i++)putchar(32);
  putchar(10);
  printf("Su Mo Tu We Th Fr Sa\n");
  for(i = 0; i < 6; i++){
    for(j = 0; j < 7; j++){
      day = get(Mo,j,i);
      if(day){
        if(day < 10){
          printf(" %i ", day);
        }else{
          printf("%i ", day);
        }
      }else{
        printf("   ");
      }
    }
    printf("\n");
  }
}
int main(int argc, char **argv){
  init();
  if(argc > 1){
    int i = 0;
    while(++i < argc){
      month( Months[atoi(argv[i])-1] );
    }
  }else{
    int c[2];
    while(1){
      c[0] = c[1] = 0;
      printf("Type the number of the month you want (e.g. 1 for January)\nPress 'q' to quit\n");
      tryagain:
      system("stty raw");
      c[0] = getchar();
      system("stty sane");
      if(c[0] == 'q'){
        break;
      }else if(c[0] > '0' && c[0] <= '9'){
        if(c[0] == '1'){
          system("stty raw");
          c[1] = getchar();
          system("stty sane");
        }
        printf("\033[A;\r\033[K;\033[A;\r\033[K;\r");
        if(c[1] > 0x2f && c[1] < 0x33){
          month( Months[10 + c[1]-0x31] );
        }else{
          month( Months[c[0]-0x31] );
        }
      }else{
        printf("\r");
        goto tryagain;
      }
    }
  }
  return 0;
}
